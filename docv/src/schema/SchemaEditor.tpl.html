{{ target: SchemaEditor }}
<div class="ecdoc-scmedt-head-desc">
这是只供我们自己简单用用的 doc schema 编辑和浏览器。<br>
注意，这是 doc schema，和api doc不一样，api doc是基于 doc schema 渲染出来的，里面有很多根据不同echarts series type以及“引用”而重复渲染的东西。
<div class="ecdoc-api-link">
    <a href="../api/APIDocSample.html" target="_blank">点我看生成的doc例子</a>
</div>
</div>

<div class="ecdoc-scmedt-tree-area">
    <div class="ecdoc-scmedt-tree" data-cpt="
        type: 'TreeList',
        name: 'schemaTree',
        viewModel: {
            selected: viewModel.apiTreeSelected,
            highlighted: viewModel.apiTreeHighlighted,
            datasource: viewModel.apiTreeDatasource
        }">
    </div>
</div>
<div class="ecdoc-scmedt-desc-area">

    <div class="ecdoc-scmedt-query-box ecdoc-fixed-panel">
        <div data-cpt="
            type: 'TextInput',
            name: 'queryInput',
            viewModel: {
                placeholder: '检索。快捷键\'/\'。例如输入：itemStyle'
            }">
        </div>
    </div>

    <div class="ecdoc-scmedt-edit-area ecdoc-fixed-panel">
        <div class="query-tabs">
            <div class="query-tab query-tab-edit query-tab-active" data-box=".query-box-edit">编辑（现在只能读不能编辑）</div>
            <div class="query-tab query-tab-by-path" data-box=".query-box-by-path">XX</div>
            <div class="query-tab query-tab-by-property" data-box=".query-box-by-property">XX</div>
            <div class="query-tab query-tab-by-full"  data-box=".query-box-by-full">XX</div>
        </div>

        <div class="query-box query-box-edit" data-arg-name="xxx">
            {{ import: EditBlock }}
        </div>

        <div class="query-box query-box-by-path" data-arg-name="optionPath" style="display:none">
            <div class="query-collapse-radio">
                <input type="radio" name="collapse-first" value="1" checked="checked" />每次折叠
                <input type="radio" name="collapse-first" value="0" />每次不折叠
                <input type="button" class="reset-btn" value="reset" />
            </div>
            <textarea class="query-input">
series[i](applicable:pie,line).itemStyle.normal.borderColor
            </textarea><input type="button" class="query-btn" value=" query "/>
        </div>

        <div class="query-box query-box-by-property" data-arg-name="fuzzyPath" style="display:none">
            <textarea class="query-input">
serie
            </textarea><input type="button" class="query-btn" value=" query "/>
        </div>

        <div class="query-box query-box-by-full" data-arg-name="anyText" style="display:none">
            <textarea class="query-input">
折线图
            </textarea><input type="button" class="query-btn" value=" query "/>
        </div>

    </div>
</div>
<div class="ecdoc-opt-path-sample">
</div>
{{ /target }}


{{ target: EditBlock }}
<!-- <div class="ecdoc-scmedt-block-line ecdoc-scmedt-typesel">
    节点类型:
    <div data-cpt="
        type: 'CheckButton',
        name: 'editBlock.blockType',
        viewModel: {
            dataList: viewModel.blockTypes
        }">
    </div>
</div> -->
<div class="ecdoc-scmedt-block-line">
    <span class="ecdoc-scmedt-block-label">property name:</span>
    <div data-cpt="
        type: 'TextInput',
        name: 'editBlock.propertyName',
        viewModel: {
        }">
    </div>
</div>
<div class="ecdoc-scmedt-block-line">
    <span class="ecdoc-scmedt-block-label">applicable:</span>
    <div data-cpt="
        type: 'TextInput',
        name: 'editBlock.applicable',
        viewModel: {
        }">
    </div>
    <span class="ecdoc-question" data-tip-tpl="tipApplicable"></span>
</div>
<div class="ecdoc-scmedt-block-line">
    <span class="ecdoc-scmedt-block-label">enumerateBy:</span>
    <div data-cpt="
        type: 'TextInput',
        name: 'editBlock.enumerateBy',
        viewModel: {
        }">
    </div>
    <span class="ecdoc-question" data-tip-tpl="tipApplicable"></span>
</div>
<div class="ecdoc-scmedt-block-line">
    <span class="ecdoc-scmedt-block-label">setApplicable:</span>
    <div data-cpt="
        type: 'TextInput',
        name: 'editBlock.setApplicable',
        viewModel: {
        }">
    </div>
    <span class="ecdoc-question" data-tip-tpl="tipApplicable"></span>
</div>
<div class="ecdoc-scmedt-block-line">
    <span class="ecdoc-scmedt-block-label">type（注意是多选）:</span>
    <div data-cpt="
        type: 'CheckButton',
        name: 'editBlock.type',
        viewModel: {
            checked: lib.obArray(),
            dataList: viewModel.valueTypes
        }">
    </div>
</div>
<div class="ecdoc-scmedt-block-line">
    <span class="ecdoc-scmedt-block-label">引用:</span>
    <div data-cpt="
        type: 'TextInput',
        name: 'editBlock.ref',
        viewModel: {
        }">
    </div>
    <span class="ecdoc-question" data-tip-tpl="tipRef"></span>
</div>
<div class="ecdoc-scmedt-block-line">
    <span class="ecdoc-scmedt-block-label">默认值:</span>
    <div data-cpt="
        type: 'TextInput',
        name: 'editBlock.defaultValue',
        viewModel: {
        }">
    </div>
</div>
<div class="ecdoc-scmedt-block-line">
    <span class="ecdoc-scmedt-block-label">默认值解释<br>
    （当默认值不好表达时用这个字段）:</span>
    <div data-cpt="
        type: 'TextInput',
        name: 'editBlock.defaultExplanation',
        viewModel: {
            type: 'textarea'
        }" class="expalanation">
    </div>
</div>
<div class="ecdoc-scmedt-block-line">
    <span class="ecdoc-scmedt-block-label">中文文档描述:</span>
    <div data-cpt="
        type: 'CheckButton',
        name: 'descViewTypeCN',
        viewModel: {
            checked: lib.ob('rendered'),
            dataList: [
                {value: 'rawHTML', text: '编辑 HTML'},
                {value: 'rendered', text: 'render'}
            ]
        }" class="label-continue">
    </div>
    <div data-cpt="
        type: 'TextInput',
        name: 'editBlock.descCN',
        viewModel: {
            type: 'textarea'
        }" style="display:none">
    </div>
    <div class="desc-rendered-cn"></div>
</div>
<div class="ecdoc-scmedt-block-line">
    <span class="ecdoc-scmedt-block-label">英文文档描述:</span>
    <div data-cpt="
        type: 'CheckButton',
        name: 'descViewTypeEN',
        viewModel: {
            checked: lib.ob('rendered'),
            dataList: [
                {value: 'rawHTML', text: '编辑 HTML'},
                {value: 'rendered', text: 'render'}
            ]
        }" class="label-continue">
    </div>
    <div data-cpt="
        type: 'TextInput',
        name: 'editBlock.descEN',
        viewModel: {
            type: 'textarea'
        }" style="display:none">
    </div>
    <div class="desc-rendered-en"></div>
</div>
{{ /target }}





{{ target: tipApplicable }}
<div class="ecdoc-app-desc">
    <h2>applicable的解释：</h2>
    <p> schemaItem上的applicable属性，形如：'line' 或 ['line', 'gauge/axisTick', 'gauge'] 等， <br>
        定义了这个属性适用的场景。如果没有applicable属性，表示适用于所有场景。<br>
        检索和构建文档中的路径/属性选取，是靠context.applicable 和 schemaItem.applicable来完成的。<br>
    </p>

    <h3>检索时： </h3>
    <p>
        检索字符串例如 'series(line, gauge).axisTick(gauge/axisTick).lineStyle' <br>
        小括号里面的内容指定了当前检索的context.applicable。（参见schemaHelper.parseOptionPath）<br>
        （每出现一次小括号，context.applicable都会被这个小括号reset。） <br>
        （检索过程中每出现一次setApplicable，也会reset context.applicable。） <br>
        其匹配方式，参见schemaHelper.isApplicableLoosly <br>
    </p>

    <h3>构建文档时： </h3>
    <p>
        构建文档时，只有出现<strong>enumerateBy</strong>属性 或 <strong>setApplicable</strong>属性 时会设置 context.applicable。<br>
        schema节点中如果出现<strong>enumerateBy</strong>属性，表明在此节点处进行分支并列显示（例如series会依据type的多种可能性并列显示）。 并且在每个分支中进行构建时，都使用 enumerateBy中对应的项 作为context.applicable。<br>
        schema节点中如果出现<strong>setApplicable</strong>属性，表示在此子树下构建时，都用 setApplicable给出的值作为context.applicable。 <br>
        其匹配方式，参见schemaHelper.isApplicableStrictly <br>
    </p>
</div>
{{ /target }}






{{ target: tipRef }}
<div class="ecdoc-app-desc">
    <h2>ref的解释：</h2>
    <p> 从一schema节点（schemaItem）引用到另一个地方。构建文档和检索时，都直接顺着引用路径深入下去。<br>
    </p>
    <p>
        构建文档时遇到引用的特殊处理：<br>
        <strong>解释文字会沿着引用链合并</strong>。引用发出方在前，被引用方在后。<br>
        <strong>引用发出方的“默认值”优先级高</strong>。如果引用发出方定义了“默认值/默认值解释”，则文档构建时会分别覆盖被引用方的“默认值”和“默认值解释”。
    </p>
    <p>
        引用的写法，例如：'#definitions/seriesItem/itemStyle'，参见 <a href="http://tools.ietf.org/html/draft-pbryan-zyp-json-ref-03" target="_blank">JSON Reference</a>。
    </p>
    <p>
        <strong>注意不要循环引用</strong>（现在没做检测，并且是一次性生成文档全部内容，那么生成文档时会挂的）
    </p>
</div>
{{ /target }}